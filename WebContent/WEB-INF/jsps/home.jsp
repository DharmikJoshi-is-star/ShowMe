
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="sf" uri="http://www.springframework.org/tags/form"%>

<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<meta charset="utf-8">
<meta name="viewport"
content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="stylesheet" 
href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
<link rel="stylesheet"
href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="chat.css">
<link rel="stylesheet"
href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<title>Chat Application</title>
<script
src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<link rel="stylesheet"
href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://code.jquery.com/jquery-2.2.4.js"></script>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons"
rel="stylesheet">
<meta name="viewport"
content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="stylesheet"
href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
<link rel="stylesheet"
href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<!-- START FOR TOOL TIP -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

 <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
        crossorigin="anonymous">


    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<!-- END FOR TOOL TIP -->

<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
<meta name="viewport" content="width=device-width">

<script
src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://onesignal.github.io/emoji-picker/lib/js/config.js"></script>
<script src="https://onesignal.github.io/emoji-picker/lib/js/util.js"></script>
<script
src="https://onesignal.github.io/emoji-picker/lib/js/jquery.emojiarea.js"></script>
<script
src="https://onesignal.github.io/emoji-picker/lib/js/emoji-picker.js"></script>
<script
src="https://cdnjs.cloudflare.com/ajax/libs/react/15.3.1/react.js"></script>
<script
src="https://cdnjs.cloudflare.com/ajax/libs/react/15.3.1/react-dom.js"></script>

<script src='https://kit.fontawesome.com/a076d05399.js'></script>
<link rel="stylesheet"
href="https://onesignal.github.io/emoji-picker/lib/css/emoji.css">
<link rel="stylesheet"
href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
<script
        src="https://kit.fontawesome.com/81c2c05f29.js"
        crossorigin="anonymous"
    ></script>
<script src='https://kit.fontawesome.com/a076d05399.js'></script>

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    
<script src="https://kit.fontawesome.com/81c2c05f29.js" crossorigin="anonymous"></script>


  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">	
<link href='https://fonts.googleapis.com/css?family=Oxygen:300' rel='stylesheet' type='text/css'>
<!-- 
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css">
-->

<!--   
<span class="entypo-user-add"></span>
<span class="entypo-thumbs-up"></span>
<span class="entypo-picture"></span>


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"> -->

<script type="text/javascript">
function openNav() {
document.getElementById("myNav").style.display = "block";
}

/*START FOR TOOL TIP*/
$(document).ready(function(){
$('[data-toggle="tooltip"]').tooltip();   
});
/*END FOR TOOL TIP*/

function closeNav() {
document.getElementById("myNav").style.display = "none";
}

$(document).ready(function () {
// Handler for .ready() called.
$('html, body').animate({
    scrollTop: $('#bottom').offset().top
}, 'slow');
});



function seeBottom() {
var elmnt = document.getElementById("bottom");
elmnt.scrollIntoView();
}

</script>

<style>


/*START FOR TOOL TIP*/
.color-tooltip + .tooltip > .tooltip-inner {background-color: #1ebea5;}
.color-tooltip + .tooltip > .tooltip-arrow { border-bottom-color:#1ebea5; }
/*END FOR TOOL TIP*/


/*Code for admin status start here*/
* {
box-sizing: border-box;
}

.row>.column {
padding: 0 8px;
}

.row:after {
content: "";
display: table;
clear: both;
}

.column {
float: left;
width: 25%;
}

/* The Modal (background) */
.modalForAdmin {
display: none;
position: fixed;
z-index: 1;
padding-top: 100px;
left: 0;
top: 0;
width: 100%;
height: 100%;
overflow: auto;
background-color: black;
}

/* Modal Content */
.adminModal-content {
position: relative;
background-color: #fefefe;
margin: auto;
padding: 0;
width: 90%;
max-width: 1200px;
}

/* The Close Button */
.close {
color: white;
position: absolute;
top: 10px;
right: 25px;
font-size: 35px;
font-weight: bold;
}

.close:hover, .close:focus {
color: #999;
text-decoration: none;
cursor: pointer;
}

.mySlidesForAdmin {
display: none;
}

.cursor {
cursor: pointer;
}

/* Next & previous buttons */
.prev, .next {
cursor: pointer;
position: absolute;
top: 50%;
width: auto;
padding: 16px;
margin-top: -50px;
color: white;
font-weight: bold;
font-size: 20px;
transition: 0.6s ease;
border-radius: 0 3px 3px 0;
user-select: none;
-webkit-user-select: none;
}

/* Position the "next button" to the right */
.next {
right: 0;
border-radius: 3px 0 0 3px;
}

/* On hover, add a black background color with a little bit see-through */
.prev:hover, .next:hover {
background-color: rgba(0, 0, 0, 0.8);
}

/* Number text (1/3 etc) */
.numbertext {
color: #f2f2f2;
font-size: 12px;
padding: 8px 12px;
position: absolute;
top: 0;
}

img {
margin-bottom: -4px;
}

.adminCaption-container {
text-align: center;
background-color: black;
padding: 2px 16px;
color: white;
}

.demoAdmin {
opacity: 0.6;
}

.active, .demo:hover {
opacity: 1;
}

img.hover-shadow {
transition: 0.3s;
}

.hover-shadow:hover {
box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0
    rgba(0, 0, 0, 0.19);
}
/*Code for admin status end here*/

/*This code is for status */
* {
box-sizing: border-box;
}

.row>.column {
padding: 0 8px;
}

.row:after {
content: "";
display: table;
clear: both;
}

.column {
float: left;
width: 25%;
}

/* The Modal (background) */
.modalStatusClass {
display: none;
position: fixed;
z-index: 1;
padding-top: 100px;
left: 0;
top: 0;
width: 100%;
height: 100%;
overflow: auto;
background-color: black;
}

/* Modal Content */
.mymodalStatus-content {
position: relative;
background-color: #fefefe;
margin: auto;
padding: 0;
width: 90%;
max-width: 1200px;
}

.mymodalStatusForAdmin-content {
position: relative;
background-color: #fefefe;
margin: auto;
padding: 0;
width: 90%;
max-width: 1200px;
}

/* The Close Button */
.close {
color: white;
position: absolute;
top: 10px;
right: 25px;
font-size: 35px;
font-weight: bold;
}

.close:hover, .close:focus {
color: #999;
text-decoration: none;
cursor: pointer;
}

.mySlides {
display: none;
}

.cursor {
cursor: pointer;
}

/* Next & previous buttons */
.prev, .next {
cursor: pointer;
position: absolute;
top: 50%;
width: auto;
padding: 16px;
margin-top: -50px;
color: white;
font-weight: bold;
font-size: 20px;
transition: 0.6s ease;
border-radius: 0 3px 3px 0;
user-select: none;
-webkit-user-select: none;
}

/* Position the "next button" to the right */
.next {
right: 0;
border-radius: 3px 0 0 3px;
}

/* On hover, add a black background color with a little bit see-through */
.prev:hover, .next:hover {
background-color: rgba(0, 0, 0, 0.8);
}

/* Number text (1/3 etc) */
.numbertext {
color: #f2f2f2;
font-size: 12px;
padding: 8px 12px;
position: absolute;
top: 0;
}

img {
margin-bottom: -4px;
}

.caption-container {
text-align: center;
background-color: black;
padding: 2px 16px;
color: white;
}

.demo {
opacity: 0.6;
}

.active, .demo:hover {
opacity: 1;
}

.active, .demoAdmin:hover {
opacity: 1;
}

img.hover-shadow {
transition: 0.3s;
}

.hover-shadow:hover {
box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0
    rgba(0, 0, 0, 0.19);
}

/* style for status start here */

/* Add padding to container elements */
.container {
padding: 16px;
}

/* The statusModel (background) */
.statusModel {
display: none; /* Hidden by default */
position: fixed; /* Stay in place */
z-index: 1; /* Sit on top */
left: 0;
top: 0;
width: 100%; /* Full width */
height: 100%; /* Full height */
overflow: auto; /* Enable scroll if needed */
background-color: #474e5d;
padding-top: 50px;
}

/* statusModel Content/Box */
.statusModel-content {
background-color: #fefefe;
margin: 5% auto 15% auto;
/* 5% from the top, 15% from the bottom and centered */
border: 1px solid #888;
width: 80%; /* Could be more or less, depending on screen size */
}

/* Style the horizontal ruler */
hr {
border: 1px solid #f1f1f1;
margin-bottom: 25px;
}

/* The statusstatusstatusstatusClose Button (x) */
.statusstatusstatusstatusClose {
position: absolute;
right: 35px;
top: 15px;
font-size: 40px;
font-weight: bold;
color: #f1f1f1;
}

.statusstatusstatusstatusClose:hover, .statusstatusstatusstatusClose:focus
{
color: #f44336;
cursor: pointer;
}

/* Clear floats */
.clearfix::after {
content: "";
clear: both;
display: table;
}

/*style for status end here*/
<!--
-->
.dropbtn {
background-color: #00BDAE;
color: white;
padding: 12px;
font-size: 12px;
border: none;
cursor: pointer;
}

.dropbtn:hover, .dropbtn:focus {
background-color: #2980B9;
}

.dropdown {
position: relative;
display: inline-block;
}

.dropdown-content {
display: none;
position: absolute;
background-color: #f1f1f1;
min-width: 160px;
overflow: auto;
box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
z-index: 1;
}

.dropdown-content a {
color: black;
padding: 12px 16px;
text-decoration: none;
display: block;
}

.dropdown a:hover {
background-color: #ddd;
}

.show {
display: block;
}

<!--
-->
<!--
-->
.modal {
display: none; /* Hidden by default */
position: fixed; /* Stay in place */
z-index: 1; /* Sit on top */
padding-top: 100px; /* Location of the box */
left: 0;
top: 0;
width: 100%; /* Full width */
height: 100%; /* Full height */
overflow: auto; /* Enable scroll if needed */
background-color: rgb(0, 0, 0); /* Fallback color */
background-color: rgba(0, 0, 0, 0.9); /* Black w/ opacity */
}

/* Modal Content (image) */
.modal-content {
margin: auto;
display: block;
width: 80%;
max-width: 700px;
}

/* Caption of Modal Image */
#caption {
margin: auto;
display: block;
width: 80%;
max-width: 700px;
text-align: center;
color: #ccc;
padding: 10px 0;
height: 150px;
}

#captionAdmin {
margin: auto;
display: block;
width: 80%;
max-width: 700px;
text-align: center;
color: #ccc;
padding: 10px 0;
height: 150px;
}

/* Add Animation */
.modal-content, #caption, #captionAdmin {
-webkit-animation-name: zoom;
-webkit-animation-duration: 0.6s;
animation-name: zoom;
animation-duration: 0.6s;
}

@-webkit-keyframes zoom {
from {-webkit-transform: scale(0)
}

to {
-webkit-transform: scale(1)
}

}
@keyframes zoom {
from {transform: scale(0)
}

to {
transform: scale(1)
}

}

/* The Close Button */
.close {
position: absolute;
top: 15px;
right: 35px;
color: #f1f1f1;
font-size: 40px;
font-weight: bold;
transition: 0.3s;
}

.close:hover, .close:focus {
color: #bbb;
text-decoration: none;
cursor: pointer;
}

/* 100% Image Width on Smaller Screens */
@media only screen and (max-width: 700px) {
.modal-content {
    width: 100%;
}
}

<!--
-->
<!--
-->
.attach {
display: inline-block;
height: 40px;
width: 40px;
position: relative;
text-align: center;
cursor: pointer;
margin-left: 10px;
overflow: hidden;
}

attach {
opacity: 0;
position: absolute;
left: 0;
width: 100%;
top: 0;
height: 100%;
z-index: 1;
}

.attach:focus, .attach:active {
background: rgba(255, 255, 255, .2);
}

.attach:before {
content: '';
font-family: fontAwesome;
line-height: 40px;
font-size: 30px;
font-weight: normal;
-webkit-text-stroke: .5px #0af;
}

.attach:before {
content: '\f0c6';
}

<!--
-->
div.ex3 {
width: 215px;
height: 700px;
overflow: auto;
}

body {
font-family: 'Lato', sans-serif;
}

.overlay {
height: 100%;
width: 100%;
display: none;
position: fixed;
z-index: 1;
top: 0;
left: 0;
background-color: rgb(0, 0, 0);
background-color: rgba(0, 0, 0, 0.9);
}

.overlay-content {
position: relative;
top: 25%;
width: 100%;
text-align: center;
margin-top: 30px;
}

.overlay a {
padding: 8px;
text-decoration: none;
font-size: 36px;
color: #818181;
display: block;
transition: 0.3s;
}

.overlay a:hover, .overlay a:focus {
color: #f1f1f1;
}

.overlay .closebtn {
position: absolute;
top: 20px;
right: 45px;
font-size: 60px;
}

@media screen and (max-height: 450px) {
.overlay a {
    font-size: 20px
}
.overlay .closebtn {
    font-size: 40px;
    top: 15px;
    right: 35px;
}
}

.my-bg {
background-color: #1ebea5;
}

.my-active {
background-color: #f4f4f4;
}

.my-pill {
background-color: #1ebea5;
}

.my-received-message {
width: 75%;
background-color: #f5f77c;
}

.my-sender-message {
width: 75%;
background-color: #f7f7f7;
}

.my-img {
height: 40px;
width: 40px;
}

    .my-margin{
margin-top: 4rem;
}
.my-width{
width:70%;
}
.my-bg{
background-color: #1ebea5;
}
.my-text{
color: #1ebea5;
}
.my-img-profile {
width: 3rem;
height: 3rem;
}
.my-img-status {
width: 2rem;
height: 2rem;
border: 1.5px solid #1ebea5;
}
.my-white {
color: #ffffff;
}

.sticky {
position: -webkit-sticky;
position: sticky;
top: 0;
}

body { 
/* Image Location */ 
background-image: C:\Users\Dharmik joshi\Pictures\Saved Picturesbackground.png;/*url("https%3A%2F%2Fcrew.bet%2Fwp-content%2Fuploads%2F2017%2F02%2Fbet-blocks-bg-purple.png%3Fid%3D2014"); */

/* Background image is centered vertically and horizontally at all times */ 
background-position: center center; 
background-repeat: no-repeat; 
background-attachment: fixed; 
background-size: cover; 
background-color: #f2f2f2; 
/* Font Colour */ 

} 



@import url('https://fonts.googleapis.com/css?family=Roboto:300,400,500&display=swap');
* {
margin: 0;
padding: 0;
}
/* body {
background: #1ebea5;
font-size: 14px;
position: relative;
font-family: 'Roboto', sans-serif;
} */
.navigation {
position: fixed;
left: -70px;
top: 0;
bottom: 0;
background: #f6f4f3;
border-right: 1px solid #1ebea5;
display: flex;
flex-direction: column;
justify-content: center;
transition: 0.2s ease-in-out left;
box-shadow: 3px 0 6px rgba(0, 0, 0, 0.1);
}
.open {
left: 0;
}
.nav-list {
text-align: center;
list-style: none;
}
.nav-item {
padding: 16px 10px;
transition: 0.1s ease-in-out transform;
}
.link {
color: #fff;
text-decoration: none;
}
.icon-nav {
font-size: 40px;/* 1.5em; */
margin-bottom: 5px;
color: #1ebea5;
text-shadow: 3px 0 6px rgba(0, 0, 0, 0.1);
}
.label {
font-size: 10px;/* 0.6em; */
font-weight: 300;
opacity: 0;
transition: 0.2s ease-in-out opacity;
color: black;
}
.nav-item:hover {
transform: scale(1.2);
transform-origin: center center;
}
.nav-item:hover .label {
opacity: 1;
}
.trigger {
position: absolute;
top: 20px;
left: 90px;
width: 20px;
height: 20px;
cursor: pointer;
color: #fff;
transition: 0.15s ease-in-out transform;
}
.rotate-trigger {
transform: rotate(180deg);
}

/*attachment menu*/

/* Layout */

.attachment-menu {
position: absolute;
/*   top: 20%;*/
left: 88%; /*with help of this we can shift the position of dropped icons*/ */
}
.attachment-menu a {
position: absolute;
left: calc(50% - 10px);
top: 25px;
opacity: 0;
visibility: hidden;

transition: opacity 0.2s linear,
top 0.2s linear,
left 0.2s linear,
visibility 0.2s linear;
}

.attachment-menu-open:checked~.attachment-menu a {
visibility: visible;
opacity: 1;
}

.attachment-menu-open:checked~.attachment-menu a:nth-child(1) {
left: calc(50% - 10px);
top: 203px;
}
.attachment-menu-open:checked~.attachment-menu a:nth-child(2) {
/*left: calc(50% - 37.28px);
top: 57.28px;*/
left: calc(50% - 10px);
top: 135px;
}
.attachment-menu-open:checked~.attachment-menu a:nth-child(3) {
left: calc(50% - 10px);
top: 67px;
}
.attachment-menu-open:checked~.attachment-menu a:nth-child(4) {
left: calc(50% + 17.28px);
top: 57.28px;
}
.attachment-menu-open:checked~.attachment-menu a:nth-child(5) {
left: calc(50% + 30px);
top: 32px;
}

/* Checkbox */
.attachment-menu-open {
display: none;
}
.attachment-menu-button {
width: 50px;
height: 50px;
margin: auto;
display: block;
box-sizing: border-box;
padding: 10px;

position: absolute;
left: 85%;
/*   left: calc(50% - 25px); /*with the help of this we can shift the menu button*/
top: calc(10%);

cursor: pointer;
background: #1ebea5;
border: 1px solid #1ebea5;
/*   box-shadow: 0px 3px 0px 1px #b9bbbd,
inset 0px 2px 8px 5px #c9cbcd; */
border-radius: 50px;
}
.attachment-menu-button:hover {
background: #1ebea5;
}

/* Menu items */
a.icon-attachment {
display: inline-block;
cursor: pointer;

/* I'm serious about hiding */
font-size: 0px;
color: rgba(0,0,0,0);
}
a.icon-attachment:before {
position: absolute;
top: 3px;
color: white;
font-size: 30px;
z-index: 1;
border-radius: 50px;
background-color: #1ebea5;
padding: 15px;
}
a.icon-attachment:hover:before {
color: white;
}

/**/
.modal {
  display: none; /* Hidden by default */
  position: fixed; /* Stay in place */
  z-index: 1; /* Sit on top */
  padding-top: 100px; /* Location of the box */
  left: 0;
  top: 0;
  width: 100%; /* Full width */
  height: 100%; /* Full height */
  overflow: auto; /* Enable scroll if needed */
  background-color: rgb(0,0,0); /* Fallback color */
  background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
}

/* Modal Content */
.modal-content {
  background-color: #fefefe;
  margin: auto;
  padding: 20px;
  border: 1px solid #888;
  width: 80%;
}

/* The Close Button */
.close {
  color: #aaaaaa;
  float: right;
  font-size: 28px;
  font-weight: bold;
}

.close:hover,
.close:focus {
  color: #000;
  text-decoration: none;
  cursor: pointer;
}
</style>
    


</head>
<body onload="seeBottom()">


<div class="navigation open">
        <div class="trigger"><i class="fas fa-chevron-left trigger-icon icon-nav"></i></div>

        <ul class="nav-list">
            <!-- Home link -->
            <li class="nav-item">
                <a href="showHome?user_id=${user_id }" class="link">
                    <i class="fas fa-home icon-nav"></i>
                    </br>
                    <span class="label">Home</span>
                </a>
            </li>
            <!-- About link -->
            <li class="nav-item">
                <a href="viewProfile?user_id=<c:out value="${user_id}"/>" class="link">
                    <i class="fa fa-user-circle icon-nav"></i>
                    </br>
                    <span class="label">Profile</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="show-group-form?user_id=<c:out value="${user_id}"/>" class="link">
                    <i class="fas fa-group icon-nav"></i>
                    </br>
                    <span class="label">New group</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="viewAllPosts?user_id=${user_id}&prev=${0}&next=${1}&postId=#" class="link">
                    <i class="fa fa-id-badge icon-nav"></i>
                    </br>
                    <span class="label">Posts</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="checkRequest?userId=<c:out value="${user_id}"/>" class="link">
                    <i class="fa fa-user-plus icon-nav"></i>
                    </br>
                    <span class="label">Friend Request</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#" onclick="document.getElementById('statusId').style.display='block'" class="link">
                    <i class="fa fa-eye icon-nav"></i>
                    </br>
                    <span class="label">Status</span>
                </a>
            </li>
                
            <li class="nav-item">
                <a href="<c:url value="/logout"/>" class="link">
                    <i class="fas fa-sign-out-alt fa-rotate-180 icon-nav"></i>
                    </br>
                    <span class="label">Logout</span>
                </a>
            </li>
        </ul>
</div>


<c:set var="user_id" value="${user_id}" />

<%-- <div id="myNav" class="overlay">
    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
    <div class="overlay-content">
        <a href="show-group-form?user_id=<c:out value="${user_id}"/>" >New
            group</a>
        <a href="viewAllPosts?user_id=${user_id}&prev=${0}&next=${1}&postId=#"><i class="fa fa-globe" style="font-size:40px;"></i>Posts</a>
        <a href="viewProfile?user_id=<c:out value="${user_id}"/>"><i class="fa fa-user-circle-o" style="font-size:40px;"></i>Profile</a>
        <a href="checkRequest?userId=<c:out value="${user_id}"/>"></a> 
        <a href="<c:url value="/logout"/>"><i class='fas fa-sign-out-alt fa-rotate-180' style='font-size:40px;'></i>LogOut</a>
            
    </div>
</div>
--%>
<div class="container min-vh-100 border mt-0 " style="background-color: #ffffff;">
    <div class="row m-4 border">
        <div class="col-4 border-right pl-0 pr-0">
            <nav class="navbar navbar-light my-bg justify-content-center">
                <!-- <span class="navbar-brand text-white"
                    style="font-size: 20px; cursor: pointer; text-align: left;"
                    onclick="openNav()" title="menu" data-toggle="tooltip" data-placement="bottom" class="color-tooltip">&#9776;</span> -->
                    <span
                    class="navbar-brand text-white">ShowMe</span> 
                    <span class="navbar-brand text-white" style="font-size: 20px; cursor: pointer; text-align: right;">
                
                    <!-- <span class="material-icons" style="font-size: 30px; color: white; width: 10px;" onclick="document.getElementById('statusId').style.display='block'">
                            <a data-toggle="tooltip" data-placement="bottom" class="color-tooltip">
                                <i class="fa fa-spinner" title=status data-toggle="tooltip" data-placement="bottom" class="color-tooltip"></i>
                            </a>
                    </span> -->
                    
                </span>

            </nav>
        
            <div id="div1" style="height: 500px;position:relative;">
                
                    
                <!-- 
                 <a href="findFriends?userId=<c:out value="${user_id}"/>" class="list-group d-flex w-100 justify-content-between">
                        &nbsp;&nbsp;&nbsp;&nbsp;<i class="fa fa-user-plus"
                        style="font-size: 40px; color: light green"></i> &nbsp;&nbsp;FIND
                        FRIENDS
                </a>
                  -->
                    <div id="div2" style="max-height:115%;overflow:auto;">
                    
                        <div id="div3" style="height:auto;">

            <!-- <ul class="list-group list-group-flush"> -->
            <div class="list-group">
                
                <a href="findFriends?userId=<c:out value="${user_id}"/>" class="list-group-item list-group-item-action flex-column align-items-start sticky">
                        &nbsp;&nbsp;&nbsp;&nbsp;<i class="fa fa-user-plus"
                        style="font-size: 35px; color: light green;"></i> &nbsp;&nbsp;
                        <b>Recommand friend</b>
                </a>
                
                <c:forEach items="${conversationList}" var="conversation">
                    
                    
                    <c:choose>
                    
                        <c:when test="${not empty conversation.getUser() }">
                        
                            <a href="showChat?contact_id=<c:out value="${conversation.getUser().getId()}"/>&user_id=<c:out value="${user_id }"/>" class="list-group-item list-group-item-action flex-column align-items-start ">
                                
                                <div class="d-flex w-100 justify-content-between">
                                	<div class="mb-1" style="margin-top: 0.2rem;">
                                   		<img src="data:image/jpg;base64,${conversation.getUser().getPicture_str()}" alt="" class="rounded-circle my-img"> 
                                    	&nbsp;
                                        <c:out value="${conversation.getUser().getName() }" /> 
                                    </div>
                                    
                                    <c:choose>
                                        <c:when test="${empty conversation.getConversationDealy()}">
                                            <small></small>
                                        </c:when>
                                        <c:when test="${conversation.getConversationDealy() == 0}">
                                            <small>today</small>
                                        </c:when>
                                        <c:when test="${conversation.getConversationDealy() == 1}">
                                            <small>yesterday</small>
                                        </c:when>
                                        <c:when test="${conversation.getConversationDealy() != 0 && conversation.getConversationDealy()<=10}">
                                            <small>${conversation.getConversationDealy()} days ago</small>
                                        </c:when>
                                        <c:when test="${conversation.getConversationDealy() > 10}">
                                            <small>${conversation.getUser().getLastMessage().getDate()}</small>
                                        </c:when>
                                    </c:choose>
                                </div>
                                <c:if test="${not empty conversation.getUser().getView()}">
                                	<span class="badge badge-primary badge-pill float-right">new</span>
                                </c:if>
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                <c:choose>
                                
                                	<c:when  test="${empty conversation.getUser().getLastMessage() }">
                                        <small> no message </small>
                                    </c:when>
                                    
                                	 <c:when  test="${empty conversation.getUser().getLastMessage().getMediaType() }">
                                        <small>${conversation.getUser().getLastMessage().getMsg() }</small>
                                    </c:when>
                                    
                                    <c:when  test="${not empty conversation.getUser().getLastMessage().getMediaType() }">
                                    
                                        <c:if  test="${conversation.getUser().getLastMessage().getMediaType() == 'PICTURE' }">
                                        
                                            <i class="fa fa-camera" style="color:lightgray"></i> &nbsp;	photo
                                        </c:if>
                                        <c:if  test="${conversation.getUser().getLastMessage().getMediaType() == 'DOCUMENT' }">
                                        
                                            <i class="fa fa-file-pdf-o" style="color:lightgray"></i> &nbsp; Document
                                    
                                        </c:if>
                                            <c:if  test="${conversation.getUser().getLastMessage().getMediaType() == 'VIDEO' }">
                                        
                                            <i class="fa fa-file-video-o" style="color:lightgray"></i> &nbsp;  Video
                                    
                                        </c:if>
                                    </c:when>
                                    
                                    <c:when test="${empty conversation.getUser().getLastMessage().getMsg() }">
                                        no message
                                    </c:when>
                                    
                            	</c:choose>
                                
                            </a>
                    
                            
                        </c:when>
                        
                       
                        <c:when test="${conversation.getGroup() != null}">
                        
                        <c:set var="conversationGroup" value="${conversation.getGroup()}"/>
                        
                        <a href="showGroup?group_id=${ conversationGroup.getGroup_id() }&user_id=${user_id}" class="list-group-item list-group-item-action flex-column align-items-start ">
                                
                                 <div class="d-flex w-100 justify-content-between">
                                    <div class="mb-1" style="margin-top: 0.2rem;">
                                    <i class="fa fa-users" style="font-size: 35px; color: light green"></i> 
                                    &nbsp;
                                    
                                        <c:out value="${conversationGroup.getGroup_name()}" /> 
                                    
                                    </div>
                                    <c:choose>
                                        <c:when test="${empty conversation.getConversationDealy()}">
                                            <small> </small>
                                        </c:when>
                                        <c:when test="${conversation.getConversationDealy() == 0}">
                                            <small>today</small>
                                        </c:when>
                                        <c:when test="${conversation.getConversationDealy() != 0 && conversation.getConversationDealy()<=10}">
                                            <small>${conversation.getConversationDealy()} days ago</small>
                                        </c:when>
                                        <c:when test="${conversation.getConversationDealy() > 10}">
                                            <small>${conversationGroup.getLastMessage().getDate()}</small>
                                        </c:when>
                                    </c:choose>
                                </div>
                                <c:if test="${not empty conversationGroup.getView()}">
                                <span class="badge badge-primary badge-pill float-right">new</span>
                                </c:if>
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                
                                <c:choose>
                                    
                                    <c:when test="${empty conversationGroup.getLastMessage()}">
                                    
                                    </c:when>
                                    
                                    <c:when  test="${not empty conversationGroup.getLastMessage().getMediaType() }">
                                    
		                                        <c:if  test="${conversationGroup.getLastMessage().getMediaType() == 'PICTURE' }">
		                                        
		                                             ${conversationGroup.getLastMessage().getSender_name()}: <i class="fa fa-camera" style="color:lightgray"></i> &nbsp;	Photo
		                                        </c:if>
		                                        
		                                    
		                                        <c:if  test="${conversation.getGroup().getLastMessage().getMediaType() == 'DOCUMENT' }">
		                                        
		                                            ${conversationGroup.getLastMessage().getSender_name()}: <i class="fa fa-file-text" style="color:lightgray"></i> &nbsp; Document
		                                    
		                                        </c:if>
		                                    
		                                        <c:if  test="${conversationGroup.getLastMessage().getMediaType() == 'VIDEO' }">
		                                        
		                                            ${conversationGroup.getLastMessage().getSender_name()}: <i class="fa fa-file-video-o" style="color:lightgray"></i> &nbsp; Video
		                                    
		                                        </c:if>
                                            
                                    </c:when>
                                    
                                    <c:when  test="${empty conversationGroup.getLastMessage().getMediaType() }">
                                    
		                                        <c:if test="${not empty conversationGroup.getLastMessage().getMsg() }">
		                                            ${conversationGroup.getLastMessage().getSender_name()}: <small>${conversationGroup.getLastMessage().getMsg() }</small>
		                                        </c:if>
		                                        
		                                        <c:if test="${empty conversationGroup.getLastMessage().getMsg() }">
		                                            no message
		                                        </c:if>
                                        
                                    </c:when>
                                
                                </c:choose>
                                
                            </a>
                	
                		</c:when>
                        
                    </c:choose>
     
    
                </c:forEach>
                

                </div>
            <!-- </ul> -->
        
        </div></div></div>
        </div>

        <!-- FROMO HERE CHAT WINDOW WILL START -->

		 <c:if test="${empty groupobj && empty receiver}">
                <div class="col-8" style="background-color: #ffffff;">
                
                    
                        <div style="text-align: center; padding-top: 20px; padding-bottom: 20px;">
                        
                    
                        <img width="600" align="middle" height="600" style='opacity: 0.5;filter: alpha(opacity=50);' src="data:image/jpg;base64,${admin.getPicture_str()}"> 
                
                    </div>
                    
                </div>
        </c:if>

        <c:choose>

            <c:when test="${ not empty groupobj}">
                <!-- THIS IS FOR GROUP CHAT -->
                <div class="col-8">

                    <nav class="navbar navbar-light my-bg justify-content-left align-items-center align-middle">
                        <!-- <a href="groupInformation?user_id=${user_id}&group_id=${groupobj.group_id}"> -->
                        <span> &nbsp;&nbsp;&nbsp;
	                        <i class="fa fa-users" style="font-size: 28px; color: white"></i> 
	                        &nbsp;&nbsp;
	                        <%-- <c:out value="${group.getGroup_name()}" />  --%>
	                        	<span class="navbar-brand text-white">
	                            	<c:out value="${groupobj.group_name }"/>
	                            </span>
                        </span>

                        <!--  -->
                        
                        <div style="text-align: left;">
                            
                             <label class="attachment-menu-button" for="attachment-menu-open" aria-hidden="true" >
                            <i class="fa fa-paperclip fa-2x" style="color: white;"></i></label>
                            
                              <input class="attachment-menu-open" id="attachment-menu-open" type="checkbox" aria-hidden="true" />
                              
                              <nav class="attachment-menu" role="navigation">
                              
                                    <a href="#" id="chooseVideoForGroup-icon" class="icon-attachment fa fa-video-camera">Video</a>
                               
                                    <a href="#" id="chooseDocumentForGroup-icon" class="icon-attachment fa fa-file-pdf-o">Document</a>
                               <!-- data-toggle="modal" data-target="#modalSelectPictureForGroup" -->
                                    <a href="#"  id="choosePictureForGroup-icon" class="icon-attachment fa fa-file-photo-o">Picture</a>
                              </nav>
                        
                        
                        
                        <div id="modalSelectDocumentForGroup" class="modal">

								  <!-- Modal content -->
								  <div class="modal-content">
								    <span class="close" id="closeDocumentGroup">&times;</span>
								    <p>Choose Document here</p>
								    
								    
								    <form action="insertMediaToGroup?user_id=${ user_id}&group_id=${groupobj.group_id}&type=document"  method="post" >
										<input id="chooseDocumentForGroup" type="file" name="chooseDocumentForGroup" />
								     	<BR><BR>
								        <input type="hidden" id="dataUrlForselectDocumentForGroup" name="dataUrlForselectDocumentForGroup">
								        <iframe id="previewDocumentForGroup" height="400" width="600"> </iframe>
								        <BR><BR>
										<input type="submit" id="mediaDocument" value="Send" class="btn btn-unique"> 
								    </form>
								    
								  </div>
								
								</div>

                                <script type="text/javascript">
                                
                                var modalSelectDocumentForGroup = document.getElementById("modalSelectDocumentForGroup");
								var chooseDocumentForGroupicon = document.getElementById("chooseDocumentForGroup-icon");
                             	var closeDocumentGroup = document.getElementById("closeDocumentGroup");
                             	var chooseDocumentForGroup = document.getElementById("chooseDocumentForGroup");
                                var dataUrlForselectDocumentForGroup = document.getElementById("dataUrlForselectDocumentForGroup");
                                var previewDocumentForGroup = document.getElementById("previewDocumentForGroup");

                             	chooseDocumentForGroupicon.onclick = function() {
                             		modalSelectDocumentForGroup.style.display = "block";
	                             }
                             	closeDocumentGroup.onclick = function() {
	                            	 modalSelectDocumentForGroup.style.display = "none";
	                             }
	                             window.onclick = function(event) {
	                               if (event.target == modalSelectDocumentForGroup) {
	                            	   modalSelectDocumentForGroup.style.display = "none";
	                               }
	                             }

	                              chooseDocumentForGroup.addEventListener("change", function() {
	                                  var file = this.files[0]; 
	                                  console.log(file);
	                                  if (file) {
	                                  		var reader = new FileReader();
	                                    	reader.addEventListener("load", function() {
	                                      		
	                                      		dataUrlForselectDocumentForGroup.setAttribute("value", this.result);
	                                      		previewDocumentForGroup.setAttribute("src", this.result);
	                                      		
	                                    	});
											reader.readAsDataURL(file);
	                                  }
	                                });
                                
                                </script>
                        
                        
                           		<div id="modalSelectPictureForGroup" class="modal">

								  <!-- Modal content -->
								  <div class="modal-content">
								    <span class="close" id="closePictureGroup">&times;</span>
								    <p>Choose Picture here</p>
								    
								    <form action="insertMediaToGroup?user_id=${ user_id}&group_id=${groupobj.group_id}&type=picture"  method="post" >
										<input id="choosePictureForGroup" type="file" name="choosePictureForGroup" />
								     	<BR><BR>
								        <input type="hidden" id="dataUrlForselectPictureForGroup" name="dataUrlForselectPictureForGroup">
								        <img id="previewImageForGroup" height="400" width="400">
								        <BR><BR>
										<input type="submit" id="mediaPicture" value="Send" class="btn btn-unique"> 
								    </form>
								    
								  </div>
								
								</div>

                                <script type="text/javascript">
                                
                                var modalSelectPictureForGroup = document.getElementById("modalSelectPictureForGroup");
								var choosePictureForGroupicon = document.getElementById("choosePictureForGroup-icon");
                             	var closePictureGroup = document.getElementById("closePictureGroup");
                             	var choosePictureForGroup = document.getElementById("choosePictureForGroup");
                                var dataUrlForselectPictureForGroup = document.getElementById("dataUrlForselectPictureForGroup");
                                var previewImageForGroup = document.getElementById("previewImageForGroup");

                             	choosePictureForGroupicon.onclick = function() {
                             		modalSelectPictureForGroup.style.display = "block";
	                             }
                             	closePictureGroup.onclick = function() {
	                            	 modalSelectPictureForGroup.style.display = "none";
	                             }
	                             window.onclick = function(event) {
	                               if (event.target == modalSelectPictureForGroup) {
	                            	   modalSelectPictureForGroup.style.display = "none";
	                               }
	                             }

	                              choosePictureForGroup.addEventListener("change", function() {
	                                  var file = this.files[0]; 
	                                  console.log(file);
	                                  if (file) {
	                                  		var reader = new FileReader();
	                                    	reader.addEventListener("load", function() {
	                                      		
	                                      		dataUrlForselectPictureForGroup.setAttribute("value", this.result);
	                                      		previewImageForGroup.setAttribute("src", this.result);
	                                      		
	                                    	});
											reader.readAsDataURL(file);
	                                  }
	                                });
                                
                                </script>
                                    
                                    
                                    
                                    
                                    <div id="modalSelectVideoForGroup" class="modal">

								  <!-- Modal content -->
								  <div class="modal-content">
								    <span class="close" id="closeVideoGroup">&times;</span>
								    <p>Choose Video here</p>
								    
								    
								    <form action="insertVideoToGroup?user_id=${ user_id}&group_id=${groupobj.group_id}&type=video"  method="post" >
								    
										<input id="chooseVideoForGroup" type="file" name="chooseVideoForGroup" />
								     	<BR><BR>
								        <input type="hidden" id="dataUrlForselectVideoForGroup" name="dataUrlForselectVideoForGroup">
								        <video id="previewVideoForGroup" controls height="400" width="600"> </video>
								        <BR><BR>
										<input type="submit" id="mediaVideo" value="Send" class="btn btn-unique"> 
								    </form>
								    
								  </div>
								
								</div>

                                <script type="text/javascript">
                                
                                var modalSelectVideoForGroup = document.getElementById("modalSelectVideoForGroup");
								var chooseVideoForGroupicon = document.getElementById("chooseVideoForGroup-icon");
                             	var closeVideoGroup = document.getElementById("closeVideoGroup");
                             	var chooseVideoForGroup = document.getElementById("chooseVideoForGroup");
                                var dataUrlForselectVideoForGroup = document.getElementById("dataUrlForselectVideoForGroup");
                                var previewVideoForGroup = document.getElementById("previewVideoForGroup");

                             	chooseVideoForGroupicon.onclick = function() {
                             		modalSelectVideoForGroup.style.display = "block";
	                             }
                             	closeVideoGroup.onclick = function() {
	                            	 modalSelectVideoForGroup.style.display = "none";
	                             }
	                             window.onclick = function(event) {
	                               if (event.target == modalSelectVideoForGroup) {
	                            	   modalSelectVideoForGroup.style.display = "none";
	                               }
	                             }

	                              chooseVideoForGroup.addEventListener("change", function() {
	                                  var file = this.files[0]; 
	                                  console.log(file);
	                                  if (file) {
	                                  		var reader = new FileReader();
	                                    	reader.addEventListener("load", function() {
	                                      		
	                                      		dataUrlForselectVideoForGroup.setAttribute("value", this.result);
	                                      		previewVideoForGroup.setAttribute("src", this.result);
	                                      		
	                                    	});
											reader.readAsDataURL(file);
	                                  }
	                                });
                                
                                </script>
                                    
                            
                            <div class="dropdown">
                                <button onclick="myFunction()" class="dropbtn">
                                    <i class="fa fa-ellipsis-v"
                                        style="font-size: 24px; "></i>
                                </button>
                                <div id="myDropdown" class="dropdown-content">
                                    
                                    <a href="groupInformation?user_id=${user_id}&group_id=${groupobj.group_id}">Group Information</a> 
                                    <a href="refreshGroup?user_id=<c:out value="${user_id}"/>&group_id=<c:out value="${groupobj.group_id}"/>">
                                        <i class="fa fa-refresh" style="font-size: 18px; color:black;"></i> refresh
                                    </a>
                                </div>
                            </div>

                            <script>
                    /* When the user clicks on the button, 
                    toggle between hiding and showing the dropdown content */
                    function myFunction() {
                      document.getElementById("myDropdown").classList.toggle("show");
                    }
                    
                    // Close the dropdown if the user clicks outside of it
                    window.onclick = function(event) {
                      if (!event.target.matches('.dropbtn')) {
                        var dropdowns = document.getElementsByClassName("dropdown-content");
                        var i;
                        for (i = 0; i < dropdowns.length; i++) {
                          var openDropdown = dropdowns[i];
                          if (openDropdown.classList.contains('show')) {
                            openDropdown.classList.remove('show');
                          }
                        }
             }
                    }
                    </script>
                        </div>


                        <!--  -->
                    </nav>

                    <div id="div1" style="height:530px; position:relative;">
                    <div id="div2" style="max-height:105%;overflow:auto;">
                        <div id="div3" style="height:auto;padding-bottom: 30px;">
                        <div class="chats">
                        
                    <c:forEach items="${groupobj.getMessages()}" var="message">

                        <c:if test="${message.getSender_id() ne user_id }">
                        
                            <div class="row m-1 justify-content-start">
                            	<span class="col-md-9 my-received-message p-2 rounded">
                                	<c:forEach items="${members }" var="member">
                                    	<c:if test="${member.getId() eq message.getSender_id()}">
											<span style="font-size: 10px; color: green;font-family:inherit;"><b><c:out value="${member.getName() }" /></b></span>
                                            <br>
                                           	<c:choose>
                                            	
                                            	<c:when test="${empty message.getMediaType() && not empty message.getMsg()}">
                                            		
                                                	${message.getMsg() }
                                            	</c:when>
													                                          
                                            	<c:when test="${not empty message.getMediaType() }">
                                            
                                                	<c:if test="${message.getMediaType() == 'PICTURE' }">
	                                                	
                                               	    	<a href="data:image/jpg;base64,${message.getMediaPicture() }"  title="click to download picture" data-toggle="tooltip" data-placement="bottom" class="color-tooltip" download="${message.getMediaFileName()}.jpg">
                                                        <img width="200" height="200" src="data:image/jpg;base64,${message.getMediaPicture() }" download="${message.getMediaFileName()}.jpg">
                                                    	</a>
                                                	</c:if>
                                                
                                                	<c:if test="${message.getMediaType() == 'DOCUMENT' }">
                                                		
                                                    	<p>
                                                			<a target="_blank" onclick="OpenSesame(${message.getMediaDocument()})" href="data:application/pdf;base64,${message.getMediaDocument() }" title="click to download pdf" data-toggle="tooltip" data-placement="bottom" class="color-tooltip" download="${message.getMediaFileName()}.pdf" >
                                                    		<i class="far fa-file-pdf" style="font-size:48px"></i>
                                                   				${message.getMediaFileName()}</a> 
                                                     	</p>
                                                
		                                                <script>
		                                                    function OpenSesame(fileName) {
		                                                      var dataURI = "data:application/pdf;base64," +fileName;
		                                                      window.open(dataURI);
		                                                    }
		                                                </script>
                                                    <!-- <object width="200" height="200" data="data:application/pdf;base64,${message.getMediaDocument() }"></object>
                                                 -->
                                            		</c:if>
                                            
                                            		<c:if test="${message.getMediaType() == 'VIDEO' }">
                                                    	
                                                    	<a href="data:video/mp4;base64,${message.getMediaVideo() }"
                                                    		title="click to download picture" data-toggle="tooltip" data-placement="bottom" class="color-tooltip"
                                                    			download="${message.getMediaFileName()}">
                                                        
	                                                        <video width="400" height="200"  controls src="data:video/mp4;base64,${message.getMediaVideo() }">
	                                                        </video>
                                                    	</a>	
                                                	</c:if>
                                                
                                            	</c:when>
                                            
                                            
                                        </c:choose>
                                            
                                             </c:if>
                        </c:forEach>
                        <BR>
									<span class="time-right" style="font-size: 10px;">
									<c:out value="${message.getTime()}"/>
									</span>
                                   </span>
                                
                                
                            </div>
                        </c:if>

                        <c:if test="${message.getSender_id() eq user_id }">
                            <div class="row m-1 justify-content-end">
                                
                                    <span class="col-md-9 my-sender-message p-2 rounded"> 
                                    <c:forEach
                                            items="${members }" var="member">
                                            <c:if test="${member.getId() eq message.getSender_id()}">
                                                <span style="font-size: 10px; color: red;font-family:inherit;"><b><c:out value="${member.getName() }" /></b></span>
                                                <br>
                                                
                                             <c:choose>
                                            <c:when test="${empty message.getMediaType() }">
                                            	<c:set var="messageType" value="TEXT"/>
                                  					<c:set var="messageId" value="${message.getId()}"/>
                                                ${message.getMsg() }
                                            </c:when>
                                            
                                            <c:when test="${not empty message.getMediaType() }">
                                            
                                                <c:if test="${message.getMediaType() == 'PICTURE' }">
                                                	<c:set var="messageType" value="PICTURE"/>
	                                  					<c:set var="messageId" value="${message.getMediaId()}"/>
	                                  					
                                                <a href="data:image/jpg;base64,${message.getMediaPicture() }" 
                                                title="click to download picture" data-toggle="tooltip" data-placement="bottom" class="color-tooltip"
                                                download="${message.getMediaFileName()}.jpg">
                                                        <img width="200" height="200" src="data:image/jpg;base64,${message.getMediaPicture() }"
                                                        download="${message.getMediaFileName()}.jpg">
                                                    </a>
                                                </c:if>
                                                
                                                <c:if test="${message.getMediaType() == 'DOCUMENT' }">
                                                	<c:set var="messageType" value="DOCUMENT"/>
	                                  					<c:set var="messageId" value="${message.getMediaId()}"/>
                                                     <p>
                                                     
                                                     <!-- href="data:application/pdf;base64,${message.getMediaDocument() }" -->
                                                    <a  
                                                    target="_blank" onclick="OpenSesame(${message.getMediaDocument()})"
                                                    href="data:application/pdf;base64,${message.getMediaDocument() }"
                                                    title="click to download picture" data-toggle="tooltip" data-placement="bottom" class="color-tooltip"
                                                    download="${message.getMediaFileName()}.pdf" >
                                                    
                                                    <i class="far fa-file-pdf" style="font-size:48px"></i>
                                                    ${message.getMediaFileName()}.pdf</a> 
                                                     
                                                     </p>
                                                <script>
                                                    function OpenSesame(fileName) {
                                                     
                                                      var dataURI = "data:application/pdf;base64," +fileName;
                                                      window.open(dataURI);
                                                     
                                                    }
                                                </script>
                                                    <!-- <object width="200" height="200" data="data:application/pdf;base64,${message.getMediaDocument() }"></object>
                                                 -->
                                                 
                                                 </c:if>
                                                 
                                                 <c:if test="${message.getMediaType() == 'VIDEO' }">
                                                    <c:set var="messageType" value="VIDEO"/>
	                                  					<c:set var="messageId" value="${message.getMediaId()}"/>
                                                    <a href="data:video/mp4;base64,${message.getMediaVideo() }"
                                                    title="click to download picture" data-toggle="tooltip" data-placement="bottom" class="color-tooltip"
                                                    download="${message.getMediaFileName()}">
                                                        
                                                        <video width="400" height="200" controls src="data:video/mp4;base64,${message.getMediaVideo() }">
                                                        </video>
                                                    </a>	
                                                </c:if>
                                                
                                            
                                            
                                            </c:when>
                                            
                                            
                                        </c:choose>
                                            
                                         
                                 </c:if>
                                    
                                  </c:forEach>
									<BR>
									<span class="time-left" style="font-size: 10px;"><c:out
                                            value="${message.getTime()}" />
                                    </span>
                                 </span> 
                                 
                                <span class="time-right" style="font-size: 10px;">
                                       <a href="deleteMessageFromGroup?user_id=${user_id}&group_id=${groupobj.group_id}&messageId=${messageId}&messageType=${messageType}&tableName=${groupobj.group_msg_table}"><i class="fa fa-remove" style="color:red"></i></a>
                                </span>
                                
                            </div>
                        </c:if>

                    </c:forEach>
                        <div id="bottom"></div>
                    </div></div></div></div>
                
                    <sf:form modelAttribute="gmessage" id="msgbox"
                        action="sentMessageGroup?user_id=${user_id }&group_id=${groupobj.group_id}&tableName=${groupobj.group_msg_table}"
                        method="post">
                        <div class="form-row">
                            <div class="col mb-2">
                                <div class="input-group">


                                    <div class="input-group-prepend  my-bg">
                                        <button type="submit" class="my-bg">
                                            <span class="input-group-text fa my-bg text-white"
                                                id="validationTooltipUsernamePrepend"><i class="fa fa-send-o"></i></span>
                                        </button>
                                    </div>

                                    <sf:input data-emoji-input="unicode" type="text" path="msg"
                                        data-emojiable="true" name="message" class="form-control"
                                        id="validationTooltipUsername"
                                        placeholder="Type your message"
                                        aria-describedby="validationTooltipUsernamePrepend" />

                                </div>
                            </div>
                        </div>
                    </sf:form>
                </div>
            </c:when>

            <c:when test="${ not empty receiver}">
                <!-- THIS IS FOR ONE-TO-ONE CHAT -->
                <div class="col-8">
                    <nav
                        class="navbar navbar-light my-bg justify-content-left align-items-center align-middle">
                        <span> <img id="myImg" 
                            src="data:image/jpg;base64,${receiver.getPicture_str() }" alt=""
                            class="rounded-circle my-img my-bg" style="cursor: pointer;"
                            title="click to view profile" data-toggle="tooltip" data-placement="bottom" class="color-tooltip"> <span
                            class="navbar-brand text-white"><c:out
                                    value="${receiver.getName() }"></c:out></span>
                        </span>

                        <div id="myModal" class="modal">
                            <span class="close">&times;</span> <img class="modal-content"
                                id="img01">
                            <div id="caption"></div>
                        </div>

                        <script>
                    // Get the modal
                    var modal = document.getElementById("myModal");
                    
                    // Get the image and insert it inside the modal - use its "alt" text as a caption
                    var img = document.getElementById("myImg");
                    var modalImg = document.getElementById("img01");
                    var captionText = document.getElementById("caption");
                    img.onclick = function(){
                      modal.style.display = "block";
                      modalImg.src = this.src;
                      captionText.innerHTML = this.alt;
                    }
                    
                    // Get the <span> element that closes the modal
                    var span = document.getElementsByClassName("close")[0];
                    
                    // When the user clicks on <span> (x), close the modal
                    span.onclick = function() { 
                      modal.style.display = "none";
                    }
                    </script>



                        <div style="text-align: left;">
                        
                        
                        <label class="attachment-menu-button" for="attachment-menu-open" aria-hidden="true" >
                            <i class="fa fa-paperclip fa-2x" style="color: white;"></i></label>
                            
                              <input class="attachment-menu-open" id="attachment-menu-open" type="checkbox" aria-hidden="true" />
                              
                              <nav class="attachment-menu" role="navigation">
                              
                                    <a href="#" id="chooseVideoForReceiver-icon" class="icon-attachment fa fa-video-camera">Video</a>
                               
                                    <a href="#" id="chooseDocumentForReceiver-icon" class="icon-attachment fa fa-file-pdf-o">Document</a>
                               <!-- data-toggle="modal" data-target="#modalSelectPictureForReceiver" -->
                                    <a href="#"  id="choosePictureForReceiver-icon" class="icon-attachment fa fa-file-photo-o">Picture</a>
                              </nav>
                        
                        
                        
                        <div id="modalSelectDocumentForReceiver" class="modal">

								  <!-- Modal content -->
								  <div class="modal-content">
								    <span class="close" id="closeDocument">&times;</span>
								    <p>Choose Document here</p>
								    
								    
								    <form action="insertMedia?user_id=${user_id}&contact_id=${receiver.getId()}&type=document"  method="post" >
										<input id="chooseDocumentForReceiver" type="file" name="chooseDocumentForReceiver" />
								     	<BR><BR>
								        <input type="hidden" id="dataUrlForselectDocumentForReceiver" name="dataUrlForselectDocumentForReceiver">
								        <iframe id="previewDocumentForReceiver" height="400" width="600"> </iframe>
								        <BR><BR>
										<input type="submit" id="mediaDocument" value="Send" class="btn btn-unique"> 
								    </form>
								    
								  </div>
								
								</div>

                                <script type="text/javascript">
                                
                                var modalSelectDocumentForReceiver = document.getElementById("modalSelectDocumentForReceiver");
								var chooseDocumentForReceivericon = document.getElementById("chooseDocumentForReceiver-icon");
                             	var closeDocument = document.getElementById("closeDocument");
                             	var chooseDocumentForReceiver = document.getElementById("chooseDocumentForReceiver");
                                var dataUrlForselectDocumentForReceiver = document.getElementById("dataUrlForselectDocumentForReceiver");
                                var previewDocumentForReceiver = document.getElementById("previewDocumentForReceiver");

                             	chooseDocumentForReceivericon.onclick = function() {
                             		modalSelectDocumentForReceiver.style.display = "block";
	                             }
                             	closeDocument.onclick = function() {
	                            	 modalSelectDocumentForReceiver.style.display = "none";
	                             }
	                             window.onclick = function(event) {
	                               if (event.target == modalSelectDocumentForReceiver) {
	                            	   modalSelectDocumentForReceiver.style.display = "none";
	                               }
	                             }

	                              chooseDocumentForReceiver.addEventListener("change", function() {
	                                  var file = this.files[0]; 
	                                  console.log(file);
	                                  if (file) {
	                                  		var reader = new FileReader();
	                                    	reader.addEventListener("load", function() {
	                                      		
	                                      		dataUrlForselectDocumentForReceiver.setAttribute("value", this.result);
	                                      		previewDocumentForReceiver.setAttribute("src", this.result);
	                                      		
	                                    	});
											reader.readAsDataURL(file);
	                                  }
	                                });
                                
                                </script>
                        
                        <%-- <form 
                            action="insertMedia?user_id=${ user_id}&contact_id=${receiver.getId()}&type=document" 
                                    method="post" 
                                            name = "mediaFormForDocument"
                                            autocomplete="on">
                            
                         <input id="chooseDocument" type="file"  name="sendDocument"  style="display: none;" />
                
                         <button type="submit" id="mediaDocument" style="display: none;"> </button>
                        
                        </form>
                
                            <script>
                                var  event_media="a";
                                        
                                 $("#chooseDoc").on("click", function(e) {
                                      e.preventDefault();
                                      e.stopPropagation();
                                    $("#chooseDocument").trigger("click");
                                  });
                                 
                                 $("#chooseDocument").on("change", function(e) {
                                      e.preventDefault();
                                      e.stopPropagation();
                                    $("#mediaDocument").trigger("click");
                                  });
                                
                            </script> 
                            
                 --%>            
                
                           		<div id="modalSelectPictureForReceiver" class="modal">

								  <!-- Modal content -->
								  <div class="modal-content">
								    <span class="close" id="closePicture">&times;</span>
								    <p>Choose Picture here</p>
								    
								    <form action="insertMedia?user_id=${user_id}&contact_id=${receiver.getId()}&type=picture"  method="post" >
										<input id="choosePictureForReceiver" type="file" name="choosePictureForReceiver" />
								     	<BR><BR>
								        <input type="hidden" id="dataUrlForselectPictureForReceiver" name="dataUrlForselectPictureForReceiver">
								        <img id="previewImageForReceiver" height="400" width="400">
								        <BR><BR>
										<input type="submit" id="mediaPicture" value="Send" class="btn btn-unique"> 
								    </form>
								    
								  </div>
								
								</div>

                                <script type="text/javascript">
                                
                                var modalSelectPictureForReceiver = document.getElementById("modalSelectPictureForReceiver");
								var choosePictureForReceivericon = document.getElementById("choosePictureForReceiver-icon");
                             	var closePicture = document.getElementById("closePicture");
                             	var choosePictureForReceiver = document.getElementById("choosePictureForReceiver");
                                var dataUrlForselectPictureForReceiver = document.getElementById("dataUrlForselectPictureForReceiver");
                                var previewImageForReceiver = document.getElementById("previewImageForReceiver");

                             	choosePictureForReceivericon.onclick = function() {
                             		modalSelectPictureForReceiver.style.display = "block";
	                             }
                             	closePicture.onclick = function() {
	                            	 modalSelectPictureForReceiver.style.display = "none";
	                             }
	                             window.onclick = function(event) {
	                               if (event.target == modalSelectPictureForReceiver) {
	                            	   modalSelectPictureForReceiver.style.display = "none";
	                               }
	                             }

	                              choosePictureForReceiver.addEventListener("change", function() {
	                                  var file = this.files[0]; 
	                                  console.log(file);
	                                  if (file) {
	                                  		var reader = new FileReader();
	                                    	reader.addEventListener("load", function() {
	                                      		
	                                      		dataUrlForselectPictureForReceiver.setAttribute("value", this.result);
	                                      		previewImageForReceiver.setAttribute("src", this.result);
	                                      		
	                                    	});
											reader.readAsDataURL(file);
	                                  }
	                                });
                                
                                </script>
                                    
                                    
                                    
                                    
                                    <div id="modalSelectVideoForReceiver" class="modal">

								  <!-- Modal content -->
								  <div class="modal-content">
								    <span class="close" id="closeVideo">&times;</span>
								    <p>Choose Video here</p>
								    
								    
								    <form action="insertVideo?user_id=${ user_id}&contact_id=${receiver.getId()}&type=video"  method="post" >
								    
										<input id="chooseVideoForReceiver" type="file" name="chooseVideoForReceiver" />
								     	<BR><BR>
								        <input type="hidden" id="dataUrlForselectVideoForReceiver" name="dataUrlForselectVideoForReceiver">
								        <video id="previewVideoForReceiver" controls height="400" width="600"> </video>
								        <BR><BR>
										<input type="submit" id="mediaVideo" value="Send" class="btn btn-unique"> 
								    </form>
								    
								  </div>
								
								</div>

                                <script type="text/javascript">
                                
                                var modalSelectVideoForReceiver = document.getElementById("modalSelectVideoForReceiver");
								var chooseVideoForReceivericon = document.getElementById("chooseVideoForReceiver-icon");
                             	var closeVideo = document.getElementById("closeVideo");
                             	var chooseVideoForReceiver = document.getElementById("chooseVideoForReceiver");
                                var dataUrlForselectVideoForReceiver = document.getElementById("dataUrlForselectVideoForReceiver");
                                var previewVideoForReceiver = document.getElementById("previewVideoForReceiver");

                             	chooseVideoForReceivericon.onclick = function() {
                             		modalSelectVideoForReceiver.style.display = "block";
	                             }
                             	closeVideo.onclick = function() {
	                            	 modalSelectVideoForReceiver.style.display = "none";
	                             }
	                             window.onclick = function(event) {
	                               if (event.target == modalSelectVideoForReceiver) {
	                            	   modalSelectVideoForReceiver.style.display = "none";
	                               }
	                             }

	                              chooseVideoForReceiver.addEventListener("change", function() {
	                                  var file = this.files[0]; 
	                                  console.log(file);
	                                  if (file) {
	                                  		var reader = new FileReader();
	                                    	reader.addEventListener("load", function() {
	                                      		
	                                      		dataUrlForselectVideoForReceiver.setAttribute("value", this.result);
	                                      		previewVideoForReceiver.setAttribute("src", this.result);
	                                      		
	                                    	});
											reader.readAsDataURL(file);
	                                  }
	                                });
                                
                                </script>
                                    
                                 
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                            <div class="dropdown">
                                <button onclick="myFunction()" class="dropbtn">
                                    <i class="fa fa-ellipsis-v"
                                        style="font-size: 24px; "></i>
                                </button>
                                <div id="myDropdown" class="dropdown-content">
                                    <a href="showReceiver?user_id=${user_id }&contact_id=${receiver.getId()}">profile</a>
                                    <!-- <a href="#home">Home</a> <a href="#about">About</a>  <a
                                        href="#contact">Contact</a> -->
                                        <a href="refresh?user_id=<c:out value="${user_id}"/>&contact_id=<c:out value="${receiver.getId()}"/>">
                                        <i class="fa fa-refresh"
                                        style="font-size: 18px; color: black"></i> refresh
                                    </a>
                                </div>
                            </div>

                            <script>
                    /* When the user clicks on the button, 
                    toggle between hiding and showing the dropdown content */
                    function myFunction() {
                      document.getElementById("myDropdown").classList.toggle("show");
                    }
                    
                    // Close the dropdown if the user clicks outside of it
                    window.onclick = function(event) {
                      if (!event.target.matches('.dropbtn')) {
                        var dropdowns = document.getElementsByClassName("dropdown-content");
                        var i;
                        for (i = 0; i < dropdowns.length; i++) {
                          var openDropdown = dropdowns[i];
                          if (openDropdown.classList.contains('show')) {
                            openDropdown.classList.remove('show');
                          }
                        }
                      }
                    }
                    </script>

                        </div>


                        <!-- 
                
                 -->
                    </nav>
                    <div id="div1" style="height:530px; position:relative;">
                    <div id="div2" style="max-height:105%;overflow:auto;">
                        <div id="div3" style="height:auto;padding-bottom: 30px;">
                        <div class="chats">
                    <c:forEach items="${messages}" var="message">

                        <c:if test="${message.getSender() ne  user_id}">
                            <div class="row m-1 justify-content-start">
                                
                                    <span class="col-md-9 my-received-message p-2 rounded">
                                        
                                        <c:choose>
                                            <c:when test="${empty message.getMediaType() }">
                                                ${message.getMsg() }
                                            </c:when>
                                            
                                            <c:when test="${not empty message.getMediaType() }">
                                            
                                                <c:if test="${message.getMediaType() == 'PICTURE' }">
                                                <a href="data:image/jpg;base64,${message.getMediaPicture() }"
                                                title="click to download picture" data-toggle="tooltip" data-placement="bottom" class="color-tooltip"
                                                download="${message.getMediaFileName()}.jpg">
                                                    <img width="200" height="200" src="data:image/jpg;base64,${message.getMediaPicture() }" 
                                                    download="${message.getMediaFileName()}.jpg">
                                                    </a>	
                                                </c:if>
                                                
                                                <c:if test="${message.getMediaType() == 'DOCUMENT' }">
                                                    <p>
                                                    <a  
                                                    target="_blank" onclick="OpenSesame(${message.getMediaDocument()})"
                                                    href="data:application/pdf;base64,${message.getMediaDocument() }"
                                                    title="click to download pdf" data-toggle="tooltip" data-placement="bottom" class="color-tooltip"
                                                    download="${message.getMediaFileName()}.pdf" >
                                                    
                                                    <i class="far fa-file-pdf" style="font-size:48px;"></i>
                                                    ${message.getMediaFileName()}.pdf</a> 
                                                    </p>
                                            <!-- 
                                                <script>
                                                    function OpenSesame(fileName) {
                                                     
                                                      var dataURI = "data:application/pdf;base64," +fileName;
                                                      window.open(dataURI);
                                                     
                                                    }
                                                </script>
                                                 -->
                                                </c:if>
                                                
                                                
                                                <c:if test="${message.getMediaType() == 'VIDEO' }">
                                                    
                                                    <a href="data:video/mp4;base64,${message.getMediaVideo() }"
                                                    title="click to download video" data-toggle="tooltip" data-placement="bottom" class="color-tooltip"
                                                    download="${message.getMediaFileName()}.mp4">
                                                        
                                                        <video width="400" height="200"  controls src="data:video/mp4;base64,${message.getMediaVideo() }">
                                                        </video>
                                                    </a>	
                                                </c:if>
                                            
                                            </c:when>
                                            
                                            
                                        </c:choose>
                                        
                                        <br>
                                        <span class="time-left" style="font-size: 10px;"><c:out
                                        value="${message.getTime()}" /></span>
                                        
                                        </span>
                                
                                
                            </div>
                        </c:if>

                        <c:if test="${message.getSender() eq  user_id}">
                            <div class="row m-1 justify-content-end">
                                
                                    <span class="col-md-9 my-sender-message p-2 rounded">
                                        <c:choose>
                                            <c:when test="${empty message.getMediaType() }">
                                            	<c:set var="messageType" value="TEXT"/>
                                            	<c:set var="messageId" value="${message.getSrno() }"/>
                                                ${message.getMsg() } 
                                                
                                            </c:when>
                                            
                                            <c:when test="${not empty message.getMediaType() }">
                                            
                                                <c:if test="${message.getMediaType() == 'PICTURE' }">
                                                <c:set var="messageType" value="PICTURE"/>
                                                <c:set var="messageId" value="${message.getMediaId() }"/>
                                                <a href="data:image/jpg;base64,${message.getMediaPicture() }" 
                                                title="click to download picture" data-toggle="tooltip" data-placement="bottom" class="color-tooltip"
                                                download="${message.getMediaFileName()}.jpg">
                                                        <img width="200" height="200" src="data:image/jpg;base64,${message.getMediaPicture() }" 
                                                        download="${message.getMediaFileName()}.jpg">
                                                    </a>
                                                </c:if>
                                                
                                                <c:if test="${message.getMediaType() == 'DOCUMENT' }">
                                                
                                                <c:set var="messageType" value="DOCUMENT"/>
                                                 <c:set var="messageId" value="${message.getMediaId() }"/>
                                                     <p>
                                                     
                                                     <!-- href="data:application/pdf;base64,${message.getMediaDocument() }" -->
                                                    <a  
                                                    target="_blank" onclick="OpenSesame(${message.getMediaDocument()})"
                                                    href="data:application/pdf;base64,${message.getMediaDocument() }"
                                                    title="click to download pdf" data-toggle="tooltip" data-placement="bottom" class="color-tooltip"
                                                    download="${message.getMediaFileName()}" >
                                                    
                                                    <i class="far fa-file-pdf" style="font-size:48px"></i>
                                                    ${message.getMediaFileName()}</a> 
                                                     
                                                     </p>
                                                <script>
                                                    function OpenSesame(fileName) {
                                                     
                                                      var dataURI = "data:application/pdf;base64," +fileName;
                                                      window.open(dataURI);
                                                     
                                                    }
                                                </script>
                                                    <!-- <object width="200" height="200" data="data:application/pdf;base64,${message.getMediaDocument() }"></object>
                                                 -->
                                            </c:if>
                                            
                                            <c:if test="${message.getMediaType() == 'VIDEO' }">
                                            
                                                    <c:set var="messageType" value="VIDEO"/>
                                                     <c:set var="messageId" value="${message.getMediaId() }"/>
                                                     
                                                    <a href="data:video/mp4;base64,${message.getMediaVideo() }"
                                                    title="click to download video" data-toggle="tooltip" data-placement="bottom" class="color-tooltip"
                                                    download="${message.getMediaFileName()}">
                                                        
                                                        <video width="400" height="200"  controls src="data:video/mp4;base64,${message.getMediaVideo() }">
                                                        </video>
                                                    </a>	
                                            </c:if>
                                            
                                            
                                            </c:when>
                                            
                                            
                                        </c:choose>
                                        
                                        <br>
                                        <span class="time-right" style="font-size: 10px;"><c:out
                                        value="${message.getTime()}" />
                                		</span>
                                    </span>
                                
                                <span class="time-right" style="font-size: 10px;">
                                       <a href="deleteMessageFromContact?user_id=${user_id}&contact_id=${receiver.getId()}&messageId=${messageId}&messageType=${messageType}"><i class="fa fa-remove" style="color:red"></i></a>
                                </span>
                                
                               <%--  <span class="time-left" style="font-size: 10px;"><c:out
                                        value="${message.getTime()}" />
                                </span> --%>
                                
                                        
                            </div>
                        </c:if>

                    </c:forEach>
                    <div id="bottom"></div>
                    </div></div></div></div>
                    <form id="msgbox"
                        action="send-message?user_id=${user_id }&contact_id=${receiver.getId()}"
                        method="post">
                        <div class="form-row">
                            <div class="col mb-2">
                                <div class="input-group">
                                    <!-- 
                            <div class="input-group-prepend ">
                                    <span class="input-group-text" id="validationTooltipUsernamePrepend">&#x1F600;</span>
                            </div>
                             -->
                                    <div class="input-group-prepend  my-bg">
                                        <button type="submit" class="my-bg">
                                            <span class="input-group-text fa my-bg text-white"
                                                id="validationTooltipUsernamePrepend"><i class="fa fa-send-o"></i></span>
                                        </button>
                                    </div>
                                    <!--   -->

                                    <input data-emoji-input="unicode" type="text"
                                        data-emojiable="true" name="message" class="form-control"
                                        id="validationTooltipUsername"
                                        placeholder="Type your message"
                                        aria-describedby="validationTooltipUsernamePrepend">

                                </div>
                            </div>
                        </div>
                    </form>
                    <!-- -->
                </div>
            </c:when>
        </c:choose>
    </div>
</div>

<!--  -->
<div id="statusId" class="statusModel">
    <span onclick="document.getElementById('statusId').style.display='none'" class="statusstatusstatusstatusClose" title="statusstatusstatusstatusClose statusModel">&times;</span>

        <div class="container">

            <h1>Status Of Your Friends</h1>
            <hr>

            <abbr class="fas fa-edit" id="chooseStatusForReceiver-icon"
                style="font-size: 30px; color: #14FF7A; cursor: pointer;" ><span title="click to add status update" data-toggle="tooltip" data-placement="bottom" class="color-tooltip">My
                    status</span>
            </abbr>
                
                 <div id="modalSelectStatusForReceiver" class="modal">

								  <!-- Modal content -->
								  <div class="modal-content">
								    <span class="close" id="closeStatus">&times;</span>
								    <p>Add status here..</p>
								    
								    
								    <form action="addStatus?user_id=${user_id }" method="post">
										<input id="chooseStatusForReceiver" type="file" name="chooseStatusForReceiver" />
								     	<BR><BR>
								        <input type="hidden" id="dataUrlForselectStatusForReceiver" name="dataUrlForselectStatusForReceiver">
								        <img id="previewStatusForReceiver" height="400" width="400"> 
								        <BR><BR>
										<input type="submit" id="mediaStatus" value="Send" class="btn btn-unique"> 
								    </form>
								    
								  </div>
								
								</div>

                                <script type="text/javascript">
                                
                                var modalSelectStatusForReceiver = document.getElementById("modalSelectStatusForReceiver");
								var chooseStatusForReceivericon = document.getElementById("chooseStatusForReceiver-icon");
                             	var closeStatus = document.getElementById("closeStatus");
                             	var chooseStatusForReceiver = document.getElementById("chooseStatusForReceiver");
                                var dataUrlForselectStatusForReceiver = document.getElementById("dataUrlForselectStatusForReceiver");
                                var previewStatusForReceiver = document.getElementById("previewStatusForReceiver");

                             	chooseStatusForReceivericon.onclick = function() {
                             		modalSelectStatusForReceiver.style.display = "block";
	                             }
                             	closeStatus.onclick = function() {
	                            	 modalSelectStatusForReceiver.style.display = "none";
	                             }
	                             window.onclick = function(event) {
	                               if (event.target == modalSelectStatusForReceiver) {
	                            	   modalSelectStatusForReceiver.style.display = "none";
	                               }
	                             }

	                              chooseStatusForReceiver.addEventListener("change", function() {
	                                  var file = this.files[0]; 
	                                  console.log(file);
	                                  if (file) {
	                                  		var reader = new FileReader();
	                                    	reader.addEventListener("load", function() {
	                                      		
	                                      		dataUrlForselectStatusForReceiver.setAttribute("value", this.result);
	                                      		previewStatusForReceiver.setAttribute("src", this.result);
	                                      		
	                                    	});
											reader.readAsDataURL(file);
	                                  }
	                                });
                                
                                </script>
                
                
           <!--  <p>Click to add status update</p>
            <input id="chooseStatusFile" type="file" name="sendPicture" style="display: none;" />
            
            <input type="hidden" id="chooseStatusPicture" type="text" name="sendPicture" style="display: none;" />
            
            <input type="submit" id="submitStatus" value="addStatus" >

                
            <script>
                  $("#clickOnNewStatus").on("click", function(e) {
                      e.preventDefault();
                    $("#chooseStatus").trigger("click");
                  });
                  $("#chooseStatus").on("change", function(e) {
                      e.preventDefault();
                    $("#submitStatus").trigger("click");
                  });
            </script>
 -->
            <!-- -------------------------------------------------------- -->

            <!-- SHOW ADMIN STATUS  -->
            <c:if test="${not empty  admin.getStatus()}">
                <c:set var="adminCount" value="1" />
                <div class="row">
                    <c:forEach items="${admin.getStatus() }" var="adminStatus">
                        <div class="column">
                            <img
                                src="data:image/jpg;base64,${adminStatus.getStatusPicture() }"
                                onclick="openModalForAdmin();currentSlideForAdmin(${adminCount})"
                                class="hover-shadow cursor"
                                style="width: 10%; border: 1px solid #ddd; border-radius: 50%; padding: 5px; width: 80px; box-shadow: 0 0 2px 1px rgba(0, 140, 186, 0.5);">

                            <a href="removeStatus?user_id=${admin.getId() }&status_id=${adminStatus.getId()}">remove</a>

                            <c:set var="adminCount" value="${adminCount+1 }" />
                        </div>
                    </c:forEach>
                </div>

                <div id="myModalForAdmin" class="modalForAdmin">
                    <h1 style="text-align: center;">MY STATUS</h1>

                    <span class="close cursor" onclick="closeModalForAdmin()">&times;</span>

                    <div class="adminModal-content">

                        <c:set var="totalAdminCount" value="${adminCount-1}" />
                        <c:set var="adminCount" value="1" />
                        <c:forEach items="${admin.getStatus() }" var="adminStatus">
                            <div class="mySlidesForAdmin">
                                <div class="numbertext">
                                    <c:out value="${adminCount }" />
                                    /
                                    <c:out value="${totalAdminCount }" />
                                </div>
                                <img
                                    src="data:image/jpg;base64,${adminStatus.getStatusPicture() }"
                                    style="width: 50%; display: block; margin-left: auto; margin-right: auto;">
                                <c:set var="adminCount" value="${adminCount+1 }" />
                            </div>
                        </c:forEach>

                        <a class="prev" onclick="plusSlidesForAdmin(-1)">&#10094;</a> <a
                            class="next" onclick="plusSlidesForAdmin(1)">&#10095;</a>

                        <div class="adminCaption-container">
                            <p id="captionForAdmin"></p>
                        </div>

                        <c:set var="adminCount" value="1" />
                        <c:forEach items="${admin.getStatus() }" var="adminStatus">
                            <div class="column">
                                <img class="demoAdmin cursor"
                                    src="data:image/jpg;base64,${adminStatus.getStatusPicture() }"
                                    style="width: 100%;" onclick="currentSlideForAdmin(${adminCount})"
                                    alt="At: ${adminStatus.getTime() }">
                                <c:set var="adminCount" value="${adminCount+1 }" />
                            </div>
                        </c:forEach>

                    </div>
                </div>
                <!-- THis script code is for status display -->
                <script>
 
     function openModalForAdmin() {
          document.getElementById("myModalForAdmin").style.display = "block";
        }

        function closeModalForAdmin() {
          document.getElementById("myModalForAdmin").style.display = "none";
        }

        var slideIndex = 1;
        showSlidesForAdmin(slideIndex);

        function plusSlidesForAdmin(n) {
          showSlidesForAdmin(slideIndex += n);
        }

        function currentSlideForAdmin(n) {
          showSlidesForAdmin(slideIndex = n);
        }

        function showSlidesForAdmin(n) {
          var i;
          var slides = document.getElementsByClassName("mySlidesForAdmin");
          var dots = document.getElementsByClassName("demoAdmin");
          var captionText = document.getElementById("captionForAdmin");
          if (n > slides.length) {slideIndex = 1}
          if (n < 1) {slideIndex = slides.length}
          for (i = 0; i < slides.length; i++) {
              slides[i].style.display = "none";
          }
          for (i = 0; i < dots.length; i++) {
              dots[i].className = dots[i].className.replace(" active", "");
          }
          slides[slideIndex-1].style.display = "block";
          dots[slideIndex-1].className += " active";
          captionText.innerHTML = dots[slideIndex-1].alt;
        }
    </script>

            </c:if>

            <!-- -------------------------------------------------------- -->
            <HR>
            <h3 style="text-align: left">Friends Status</h3>
            <HR>

            <c:set var="count" value="1" />
                        
            <c:forEach items="${ conversationList}" var="conversation">
                <c:if test="${not empty conversation.getUser() }">
                <c:set var="user" value="${conversation.getUser() }"/>
                <c:if test="${not empty user.getStatus() }">
                    <div class="row">
                        <c:forEach items="${user.getStatus() }" var="status">
                            <div class="column">
                                <img id="userStatus"
                                    src="data:image/jpg;base64,${status.getStatusPicture() }"
                                    onclick="openModal();currentSlide(${count})"
                                    class="hover-shadow cursor" alt="status"
                                    style="width: 10%; border: 1px solid #ddd; border-radius: 50%; padding: 5px; width: 80px; box-shadow: 0 0 2px 1px rgba(0, 140, 186, 0.5);">
                                <span style="color: white;">Status By: <c:out value="${user.getName() }" /></span><BR>At: <c:out value="${status.getTime()}" />
                                <c:set var="count" value="${count+1 }" />
                            </div>
                        </c:forEach>
                    </div>
                    <HR>
                </c:if>
                </c:if>
            </c:forEach>

            <c:set var="totalStatusByFriends" value="${count-1}"></c:set>
            <c:set var="count" value="1" />
            <div id="myStatusModalId" class="modalStatusClass">
                <h1 style="text-align: center;">STATUS</h1>
                <span class="close cursor" onclick="closeModal()">&times;</span>
                <div class="mymodalStatus-content">
                
                <c:forEach items="${ conversationList}" var="conversation">
	                <c:if test="${not empty conversation.getUser() }">
	                <c:set var="user" value="${conversation.getUser() }"/>
	                <c:if test="${not empty user.getStatus() }">

                            <c:forEach items="${user.getStatus() }" var="status">
                                <div class="mySlides">
                                    <div class="numbertext">
                                        <c:out value="${count }" />
                                        /
                                        <c:out value="${totalStatusByFriends }" />
                                    </div>
                                    <img src="data:image/jpg;base64,${status.getStatusPicture() }"
                                        style="width: 50%; display: block; margin-left: auto; margin-right: auto;">
                                </div>
                                <c:set var="count" value="${count+1 }" />
                            </c:forEach>
                        </c:if>
                        </c:if>
                    </c:forEach>

                    <a class="prev" onclick="plusSlides(-1)">&#10094;</a> <a
                        class="next" onclick="plusSlides(1)">&#10095;</a>

                    <div class="caption-container">
                        <p id="captionAdmin"></p>
                    </div>

                    <c:set var="count" value="1" />
                    
                    <c:forEach items="${ conversationList}" var="conversation">
	                	<c:if test="${not empty conversation.getUser() }">
	                 	<c:set var="user" value="${conversation.getUser() }"/>
                    
                        	<c:if test="${not empty user.getStatus() }">
                          		<c:forEach items="${user.getStatus() }" var="status">
                                	<div class="column">
                                    	<img class="demo cursor"  style="width:100%;" src="data:image/jpg;base64,${status.getStatusPicture() }" onclick="currentSlide(${count})" alt="Status By: ${user.getName() }">
                                	</div>
                                	<c:set var="count" value="${count+1 }" />
                            	</c:forEach>
                       		</c:if>
                    	</c:if>
                    
                    </c:forEach>

                </div>
            </div>

            <!-- THis script code is for status display -->
            <script>
 
 $(function() {
     // Initializes and creates emoji set from sprite sheet
     window.emojiPicker = new EmojiPicker({
       emojiable_selector: '[data-emojiable=true]',
       assetsPath: 'http://onesignal.github.io/emoji-picker/lib/img/',
       popupButtonClasses: 'fa fa-smile-o'
     });
     // Finds all elements with `emojiable_selector` and converts them to rich emoji input fields
     // You may want to delay this step if you have dynamically created input fields that appear later in the loading process
     // It can be called as many times as necessary; previously converted input fields will not be converted again
     window.emojiPicker.discover();
   });
 
    function openModal() {
      document.getElementById("myStatusModalId").style.display = "block";
    }
    
    function closeModal() {
      document.getElementById("myStatusModalId").style.display = "none";
    }
    
    var slideIndex = 1;
    showSlides(slideIndex);
    
    function plusSlides(n) {
      showSlides(slideIndex += n);
    }
    
    function currentSlide(n) {
      showSlides(slideIndex = n);
    }
    
    function showSlides(n) {
      var i;
      var slides = document.getElementsByClassName("mySlides");
      var dots = document.getElementsByClassName("demo");
      var captionText = document.getElementById("captionAdmin");
      if (n > slides.length) {slideIndex = 1}
      if (n < 1) {slideIndex = slides.length}
      for (i = 0; i < slides.length; i++) {
          slides[i].style.display = "none";
      }
      for (i = 0; i < dots.length; i++) {
          dots[i].className = dots[i].className.replace(" active", "");
      }
      slides[slideIndex-1].style.display = "block";
      dots[slideIndex-1].className += " active";
      captionText.innerHTML = dots[slideIndex-1].alt;
    }
    </script>
        </div>
    

</div>


</body>
<script>
// Get the statusModel
var statusModel = document.getElementById('statusId');

// When the user clicks anywhere outside of the statusModel, statusstatusstatusstatusClose it
window.onclick = function(event) {
if (event.target == statusModel) {
statusModel.style.display = "none";
}
}

//for vertical-nav
const trigger = document.querySelector('.trigger');
const nav = document.querySelector('.navigation');

const toggleClass = (element, className) => element.classList.toggle(className);

trigger.addEventListener('click', () => {
toggleClass(nav, 'open');
toggleClass(trigger, 'rotate-trigger');
});


	 

</script>
</html>